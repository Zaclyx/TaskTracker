import{$ as k,E as K,F as z,G as D,Hb as te,J as S,M as R,N as b,Pb as ne,T as g,U as j,V as T,W as h,_b as se,a as U,aa as X,fa as M,ha as Q,i as x,ia as p,pa as P,r as u,t as m,tb as ee,u as f,w as N,x as F,y as q}from"./chunk-L3PLJJSQ.js";var L=class{},ae=(()=>{class n extends L{getTranslation(e){return u({})}static \u0275fac=(()=>{let e;return function(s){return(e||(e=M(n)))(s||n)}})();static \u0275prov=g({token:n,factory:n.\u0275fac})}return n})(),y=class{},ie=(()=>{class n{handle(e){return e.key}static \u0275fac=function(t){return new(t||n)};static \u0275prov=g({token:n,factory:n.\u0275fac})}return n})();function _(n,r){if(n===r)return!0;if(n===null||r===null)return!1;if(n!==n&&r!==r)return!0;let e=typeof n,t=typeof r,s,a,i;if(e==t&&e=="object")if(Array.isArray(n)){if(!Array.isArray(r))return!1;if((s=n.length)==r.length){for(a=0;a<s;a++)if(!_(n[a],r[a]))return!1;return!0}}else{if(Array.isArray(r))return!1;i=Object.create(null);for(a in n){if(!_(n[a],r[a]))return!1;i[a]=!0}for(a in r)if(!(a in i)&&typeof r[a]<"u")return!1;return!0}return!1}function c(n){return typeof n<"u"&&n!==null}function V(n){return n&&typeof n=="object"&&!Array.isArray(n)}function ue(n,r){let e=Object.assign({},n);return V(n)&&V(r)&&Object.keys(r).forEach(t=>{V(r[t])?t in n?e[t]=ue(n[t],r[t]):Object.assign(e,{[t]:r[t]}):Object.assign(e,{[t]:r[t]})}),e}var v=class{},re=(()=>{class n extends v{templateMatcher=/{{\s?([^{}\s]*)\s?}}/g;interpolate(e,t){let s;return typeof e=="string"?s=this.interpolateString(e,t):typeof e=="function"?s=this.interpolateFunction(e,t):s=e,s}getValue(e,t){let s=typeof t=="string"?t.split("."):[t];t="";do t+=s.shift(),c(e)&&c(e[t])&&(typeof e[t]=="object"||!s.length)?(e=e[t],t=""):s.length?t+=".":e=void 0;while(s.length);return e}interpolateFunction(e,t){return e(t)}interpolateString(e,t){return t?e.replace(this.templateMatcher,(s,a)=>{let i=this.getValue(t,a);return c(i)?i:s}):e}static \u0275fac=(()=>{let e;return function(s){return(e||(e=M(n)))(s||n)}})();static \u0275prov=g({token:n,factory:n.\u0275fac})}return n})(),w=class{},oe=(()=>{class n extends w{compile(e,t){return e}compileTranslations(e,t){return e}static \u0275fac=(()=>{let e;return function(s){return(e||(e=M(n)))(s||n)}})();static \u0275prov=g({token:n,factory:n.\u0275fac})}return n})(),E=class{defaultLang;currentLang=this.defaultLang;translations={};langs=[];onTranslationChange=new p;onLangChange=new p;onDefaultLangChange=new p},B=new T("USE_STORE"),H=new T("USE_DEFAULT_LANG"),G=new T("DEFAULT_LANGUAGE"),Y=new T("USE_EXTEND"),$=(()=>{class n{store;currentLoader;compiler;parser;missingTranslationHandler;useDefaultLang;isolate;extend;loadingTranslations;pending=!1;_onTranslationChange=new p;_onLangChange=new p;_onDefaultLangChange=new p;_defaultLang;_currentLang;_langs=[];_translations={};_translationRequests={};get onTranslationChange(){return this.isolate?this._onTranslationChange:this.store.onTranslationChange}get onLangChange(){return this.isolate?this._onLangChange:this.store.onLangChange}get onDefaultLangChange(){return this.isolate?this._onDefaultLangChange:this.store.onDefaultLangChange}get defaultLang(){return this.isolate?this._defaultLang:this.store.defaultLang}set defaultLang(e){this.isolate?this._defaultLang=e:this.store.defaultLang=e}get currentLang(){return this.isolate?this._currentLang:this.store.currentLang}set currentLang(e){this.isolate?this._currentLang=e:this.store.currentLang=e}get langs(){return this.isolate?this._langs:this.store.langs}set langs(e){this.isolate?this._langs=e:this.store.langs=e}get translations(){return this.isolate?this._translations:this.store.translations}set translations(e){this.isolate?this._translations=e:this.store.translations=e}constructor(e,t,s,a,i,o=!0,l=!1,d=!1,C){this.store=e,this.currentLoader=t,this.compiler=s,this.parser=a,this.missingTranslationHandler=i,this.useDefaultLang=o,this.isolate=l,this.extend=d,C&&this.setDefaultLang(C)}setDefaultLang(e){if(e===this.defaultLang)return;let t=this.retrieveTranslations(e);typeof t<"u"?(this.defaultLang==null&&(this.defaultLang=e),t.pipe(D(1)).subscribe(s=>{this.changeDefaultLang(e)})):this.changeDefaultLang(e)}getDefaultLang(){return this.defaultLang}use(e){if(e===this.currentLang)return u(this.translations[e]);let t=this.retrieveTranslations(e);return typeof t<"u"?(this.currentLang||(this.currentLang=e),t.pipe(D(1)).subscribe(s=>{this.changeLang(e)}),t):(this.changeLang(e),u(this.translations[e]))}retrieveTranslations(e){let t;return(typeof this.translations[e]>"u"||this.extend)&&(this._translationRequests[e]=this._translationRequests[e]||this.getTranslation(e),t=this._translationRequests[e]),t}getTranslation(e){this.pending=!0;let t=this.currentLoader.getTranslation(e).pipe(R(1),D(1));return this.loadingTranslations=t.pipe(f(s=>this.compiler.compileTranslations(s,e)),R(1),D(1)),this.loadingTranslations.subscribe({next:s=>{this.translations[e]=this.extend&&this.translations[e]?U(U({},s),this.translations[e]):s,this.updateLangs(),this.pending=!1},error:s=>{this.pending=!1}}),t}setTranslation(e,t,s=!1){t=this.compiler.compileTranslations(t,e),(s||this.extend)&&this.translations[e]?this.translations[e]=ue(this.translations[e],t):this.translations[e]=t,this.updateLangs(),this.onTranslationChange.emit({lang:e,translations:this.translations[e]})}getLangs(){return this.langs}addLangs(e){e.forEach(t=>{this.langs.indexOf(t)===-1&&this.langs.push(t)})}updateLangs(){this.addLangs(Object.keys(this.translations))}getParsedResult(e,t,s){let a;if(t instanceof Array){let i={},o=!1;for(let l of t)i[l]=this.getParsedResult(e,l,s),m(i[l])&&(o=!0);if(o){let l=t.map(d=>m(i[d])?i[d]:u(i[d]));return q(l).pipe(f(d=>{let C={};return d.forEach((he,de)=>{C[t[de]]=he}),C}))}return i}if(e&&(a=this.parser.interpolate(this.parser.getValue(e,t),s)),typeof a>"u"&&this.defaultLang!=null&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(a=this.parser.interpolate(this.parser.getValue(this.translations[this.defaultLang],t),s)),typeof a>"u"){let i={key:t,translateService:this};typeof s<"u"&&(i.interpolateParams=s),a=this.missingTranslationHandler.handle(i)}return typeof a<"u"?a:t}get(e,t){if(!c(e)||!e.length)throw new Error('Parameter "key" required');if(this.pending)return this.loadingTranslations.pipe(z(s=>(s=this.getParsedResult(s,e,t),m(s)?s:u(s))));{let s=this.getParsedResult(this.translations[this.currentLang],e,t);return m(s)?s:u(s)}}getStreamOnTranslationChange(e,t){if(!c(e)||!e.length)throw new Error('Parameter "key" required');return N(F(()=>this.get(e,t)),this.onTranslationChange.pipe(b(s=>{let a=this.getParsedResult(s.translations,e,t);return typeof a.subscribe=="function"?a:u(a)})))}stream(e,t){if(!c(e)||!e.length)throw new Error('Parameter "key" required');return N(F(()=>this.get(e,t)),this.onLangChange.pipe(b(s=>{let a=this.getParsedResult(s.translations,e,t);return m(a)?a:u(a)})))}instant(e,t){if(!c(e)||!e.length)throw new Error('Parameter "key" required');let s=this.getParsedResult(this.translations[this.currentLang],e,t);if(m(s)){if(e instanceof Array){let a={};return e.forEach((i,o)=>{a[e[o]]=e[o]}),a}return e}else return s}set(e,t,s=this.currentLang){this.translations[s][e]=this.compiler.compile(t,s),this.updateLangs(),this.onTranslationChange.emit({lang:s,translations:this.translations[s]})}changeLang(e){this.currentLang=e,this.onLangChange.emit({lang:e,translations:this.translations[e]}),this.defaultLang==null&&this.changeDefaultLang(e)}changeDefaultLang(e){this.defaultLang=e,this.onDefaultLangChange.emit({lang:e,translations:this.translations[e]})}reloadLang(e){return this.resetLang(e),this.getTranslation(e)}resetLang(e){this._translationRequests[e]=void 0,this.translations[e]=void 0}getBrowserLang(){if(typeof window>"u"||typeof window.navigator>"u")return;let e=window.navigator.languages?window.navigator.languages[0]:null;if(e=e||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,!(typeof e>"u"))return e.indexOf("-")!==-1&&(e=e.split("-")[0]),e.indexOf("_")!==-1&&(e=e.split("_")[0]),e}getBrowserCultureLang(){if(typeof window>"u"||typeof window.navigator>"u")return;let e=window.navigator.languages?window.navigator.languages[0]:null;return e=e||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,e}static \u0275fac=function(t){return new(t||n)(h(E),h(L),h(w),h(v),h(y),h(H),h(B),h(Y),h(G))};static \u0275prov=g({token:n,factory:n.\u0275fac})}return n})(),Se=(()=>{class n{translateService;element;_ref;key;lastParams;currentParams;onLangChangeSub;onDefaultLangChangeSub;onTranslationChangeSub;set translate(e){e&&(this.key=e,this.checkNodes())}set translateParams(e){_(this.currentParams,e)||(this.currentParams=e,this.checkNodes(!0))}constructor(e,t,s){this.translateService=e,this.element=t,this._ref=s,this.onTranslationChangeSub||(this.onTranslationChangeSub=this.translateService.onTranslationChange.subscribe(a=>{a.lang===this.translateService.currentLang&&this.checkNodes(!0,a.translations)})),this.onLangChangeSub||(this.onLangChangeSub=this.translateService.onLangChange.subscribe(a=>{this.checkNodes(!0,a.translations)})),this.onDefaultLangChangeSub||(this.onDefaultLangChangeSub=this.translateService.onDefaultLangChange.subscribe(a=>{this.checkNodes(!0)}))}ngAfterViewChecked(){this.checkNodes()}checkNodes(e=!1,t){let s=this.element.nativeElement.childNodes;s.length||(this.setContent(this.element.nativeElement,this.key),s=this.element.nativeElement.childNodes);for(let a=0;a<s.length;++a){let i=s[a];if(i.nodeType===3){let o;if(e&&(i.lastKey=null),c(i.lookupKey))o=i.lookupKey;else if(this.key)o=this.key;else{let l=this.getContent(i),d=l.trim();d.length&&(i.lookupKey=d,l!==i.currentValue?(o=d,i.originalContent=l||i.originalContent):i.originalContent?o=i.originalContent.trim():l!==i.currentValue&&(o=d,i.originalContent=l||i.originalContent))}this.updateValue(o,i,t)}}}updateValue(e,t,s){if(e){if(t.lastKey===e&&this.lastParams===this.currentParams)return;this.lastParams=this.currentParams;let a=i=>{i!==e&&(t.lastKey=e),t.originalContent||(t.originalContent=this.getContent(t)),t.currentValue=c(i)?i:t.originalContent||e,this.setContent(t,this.key?t.currentValue:t.originalContent.replace(e,t.currentValue)),this._ref.markForCheck()};if(c(s)){let i=this.translateService.getParsedResult(s,e,this.currentParams);m(i)?i.subscribe({next:a}):a(i)}else this.translateService.get(e,this.currentParams).subscribe(a)}}getContent(e){return c(e.textContent)?e.textContent:e.data}setContent(e,t){c(e.textContent)?e.textContent=t:e.data=t}ngOnDestroy(){this.onLangChangeSub&&this.onLangChangeSub.unsubscribe(),this.onDefaultLangChangeSub&&this.onDefaultLangChangeSub.unsubscribe(),this.onTranslationChangeSub&&this.onTranslationChangeSub.unsubscribe()}static \u0275fac=function(t){return new(t||n)(P($),P(Q),P(ee))};static \u0275dir=X({type:n,selectors:[["","translate",""],["","ngx-translate",""]],inputs:{translate:"translate",translateParams:"translateParams"}})}return n})();var J=(()=>{class n{static forRoot(e={}){return{ngModule:n,providers:[e.loader||{provide:L,useClass:ae},e.compiler||{provide:w,useClass:oe},e.parser||{provide:v,useClass:re},e.missingTranslationHandler||{provide:y,useClass:ie},E,{provide:B,useValue:e.isolate},{provide:H,useValue:e.useDefaultLang},{provide:Y,useValue:e.extend},{provide:G,useValue:e.defaultLanguage},$]}}static forChild(e={}){return{ngModule:n,providers:[e.loader||{provide:L,useClass:ae},e.compiler||{provide:w,useClass:oe},e.parser||{provide:v,useClass:re},e.missingTranslationHandler||{provide:y,useClass:ie},{provide:B,useValue:e.isolate},{provide:H,useValue:e.useDefaultLang},{provide:Y,useValue:e.extend},{provide:G,useValue:e.defaultLanguage},$]}}static \u0275fac=function(t){return new(t||n)};static \u0275mod=k({type:n});static \u0275inj=j({})}return n})();var A={production:!0,appVersion:"v8.2.3",USERDATA_KEY:"authf649fc9a5f55",isMockEnabled:!0,apiUrl:"api",appThemeName:"Metronic",appPurchaseUrl:"https://1.envato.market/EA4JP",appHTMLIntegration:"https://preview.keenthemes.com/metronic8/demo6/documentation/base/helpers/flex-layouts.html",appPreviewUrl:"https://preview.keenthemes.com/metronic8/angular/demo6/",appPreviewAngularUrl:"https://preview.keenthemes.com/metronic8/angular/demo6",appPreviewDocsUrl:"https://preview.keenthemes.com/metronic8/angular/docs",appPreviewChangelogUrl:"https://preview.keenthemes.com/metronic8/angular/docs/changelog",appDemos:{demo1:{title:"Demo 1",description:"Default Dashboard",published:!0,thumbnail:"./assets/media/demos/demo1.png"},demo2:{title:"Demo 2",description:"SaaS Application",published:!0,thumbnail:"./assets/media/demos/demo2.png"},demo3:{title:"Demo 3",description:"New Trend",published:!0,thumbnail:"./assets/media/demos/demo3.png"},demo4:{title:"Demo 4",description:"Intranet Application",published:!1,thumbnail:"./assets/media/demos/demo4.png"},demo5:{title:"Demo 5",description:"Support Forum",published:!1,thumbnail:"./assets/media/demos/demo5.png"},demo6:{title:"Demo 6",description:"Admin Backend",published:!1,thumbnail:"./assets/media/demos/demo6.png"},demo7:{title:"Demo 7",description:"CRM Dashboard",published:!1,thumbnail:"./assets/media/demos/demo7.png"},demo8:{title:"Demo 8",description:"Core Dashboard",published:!1,thumbnail:"./assets/media/demos/demo8.png"},demo9:{title:"Demo 9",description:"Fancy Dashboard",published:!1,thumbnail:"./assets/media/demos/demo9.png"},demo10:{title:"Demo 10",description:"Modern Dashboard",published:!1,thumbnail:"./assets/media/demos/demo10.png"},demo11:{title:"Demo 11",description:"Light Dashboard",published:!1,thumbnail:"./assets/media/demos/demo11.png"},demo12:{title:"Demo 12",description:"Reporting System",published:!1,thumbnail:"./assets/media/demos/demo12.png"},demo13:{title:"Demo 13",description:"Classic Dashboard",published:!1,thumbnail:"./assets/media/demos/demo13.png"},demo14:{title:"Demo 14",description:"Creative Dashboard",published:!1,thumbnail:"./assets/media/demos/demo14.png"},demo15:{title:"Demo 15",description:"Minimalistic Dashboard",published:!1,thumbnail:"./assets/media/demos/demo15.png"},demo16:{title:"Demo 16",description:"Modern Dashboard",published:!1,thumbnail:"./assets/media/demos/demo16.png"},demo17:{title:"Demo 17",description:"Backend System",published:!1,thumbnail:"./assets/media/demos/demo17.png"},demo18:{title:"Demo 18",description:"System Dashboard",published:!1,thumbnail:"./assets/media/demos/demo18.png"},demo19:{title:"Demo 19",description:"Light Dashboard",published:!1,thumbnail:"./assets/media/demos/demo19.png"},demo20:{title:"Demo 20",description:"Monochrome Dashboard",published:!1,thumbnail:"./assets/media/demos/demo20.png"}},firebase:{apiKey:"AIzaSyAT0iyYyuI2i-4-FPL2b8vTpp5-GxEXQeg",authDomain:"tasktracker-a5168.firebaseapp.com",projectId:"tasktracker-a5168",storageBucket:"tasktracker-a5168.appspot.com",messagingSenderId:"480458112471",appId:"1:480458112471:web:2ee3cd039f25c2cc715f92",measurementId:"G-SYRZK7MBWW"}};var Me=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=k({type:n});static \u0275inj=j({imports:[te,J,J]})}return n})();var I=class{authToken;refreshToken;expiresIn;setAuth(r){this.authToken=r.authToken,this.refreshToken=r.refreshToken,this.expiresIn=r.expiresIn}};var O=class{static users=[{id:1,username:"admin",password:"demo",email:"admin@demo.com",authToken:"auth-token-8f3ae836da744329a6f93bf20594b5cc",refreshToken:"auth-token-f8c137a2c98743f48b643e71161d90aa",roles:[1],pic:"./assets/media/avatars/300-1.jpg",fullname:"Sean S",firstname:"Sean",lastname:"Stark",occupation:"CEO",companyName:"Keenthemes",phone:"456669067890",language:"en",timeZone:"International Date Line West",website:"https://keenthemes.com",emailSettings:{emailNotification:!0,sendCopyToPersonalEmail:!1,activityRelatesEmail:{youHaveNewNotifications:!1,youAreSentADirectMessage:!1,someoneAddsYouAsAsAConnection:!0,uponNewOrder:!1,newMembershipApproval:!1,memberRegistration:!0},updatesFromKeenthemes:{newsAboutKeenthemesProductsAndFeatureUpdates:!1,tipsOnGettingMoreOutOfKeen:!1,thingsYouMissedSindeYouLastLoggedIntoKeen:!0,newsAboutMetronicOnPartnerProductsAndOtherServices:!0,tipsOnMetronicBusinessProducts:!0}},communication:{email:!0,sms:!0,phone:!1},address:{addressLine:"L-12-20 Vertex, Cybersquare",city:"San Francisco",state:"California",postCode:"45000"},socialNetworks:{linkedIn:"https://linkedin.com/admin",facebook:"https://facebook.com/admin",twitter:"https://twitter.com/admin",instagram:"https://instagram.com/admin"}},{id:2,username:"user",password:"demo",email:"user@demo.com",authToken:"auth-token-6829bba69dd3421d8762-991e9e806dbf",refreshToken:"auth-token-f8e4c61a318e4d618b6c199ef96b9e55",roles:[2],pic:"./assets/media/avatars/300-6.jpg",fullname:"Megan F",firstname:"Megan",lastname:"Fox",occupation:"Deputy Head of Keenthemes in New York office",companyName:"Keenthemes",phone:"456669067891",language:"en",timeZone:"International Date Line West",communication:{email:!0,sms:!0,phone:!1},emailSettings:{emailNotification:!0,sendCopyToPersonalEmail:!1,activityRelatesEmail:{youHaveNewNotifications:!1,youAreSentADirectMessage:!1,someoneAddsYouAsAsAConnection:!0,uponNewOrder:!1,newMembershipApproval:!1,memberRegistration:!0},updatesFromKeenthemes:{newsAboutKeenthemesProductsAndFeatureUpdates:!1,tipsOnGettingMoreOutOfKeen:!1,thingsYouMissedSindeYouLastLoggedIntoKeen:!0,newsAboutMetronicOnPartnerProductsAndOtherServices:!0,tipsOnMetronicBusinessProducts:!0}},address:{addressLine:"3487  Ingram Road",city:"Greensboro",state:"North Carolina",postCode:"27409"},socialNetworks:{linkedIn:"https://linkedin.com/user",facebook:"https://facebook.com/user",twitter:"https://twitter.com/user",instagram:"https://instagram.com/user"}},{id:3,username:"guest",password:"demo",email:"guest@demo.com",authToken:"auth-token-d2dff7b82f784de584b60964abbe45b9",refreshToken:"auth-token-c999ccfe74aa40d0aa1a64c5e620c1a5",roles:[3],pic:"./assets/media/avatars/300-20.jpg",fullname:"Manu G",firstname:"Manu",lastname:"Ginobili",occupation:"CFO",companyName:"Keenthemes",phone:"456669067892",language:"en",timeZone:"International Date Line West",communication:{email:!0,sms:!0,phone:!1},emailSettings:{emailNotification:!0,sendCopyToPersonalEmail:!1,activityRelatesEmail:{youHaveNewNotifications:!1,youAreSentADirectMessage:!1,someoneAddsYouAsAsAConnection:!0,uponNewOrder:!1,newMembershipApproval:!1,memberRegistration:!0},updatesFromKeenthemes:{newsAboutKeenthemesProductsAndFeatureUpdates:!1,tipsOnGettingMoreOutOfKeen:!1,thingsYouMissedSindeYouLastLoggedIntoKeen:!0,newsAboutMetronicOnPartnerProductsAndOtherServices:!0,tipsOnMetronicBusinessProducts:!0}},address:{addressLine:"1467  Griffin Street",city:"Phoenix",state:"Arizona",postCode:"85012"},socialNetworks:{linkedIn:"https://linkedin.com/guest",facebook:"https://facebook.com/guest",twitter:"https://twitter.com/guest",instagram:"https://instagram.com/guest"}}];static tokens=[{id:1,authToken:"auth-token-"+Math.random(),refreshToken:"auth-token-"+Math.random()}]};var le=`${A.apiUrl}/users`,Z=(()=>{class n{http;constructor(e){this.http=e}login(e,t){let s=new Error("Not Found");return!e||!t?u(s):this.getAllUsers().pipe(f(a=>{if(a.length<=0)return s;let i=a.find(l=>l.email.toLowerCase()===e.toLowerCase()&&l.password===t);if(!i)return s;let o=new I;return o.authToken=i.authToken,o.refreshToken=i.refreshToken,o.expiresIn=new Date(Date.now()+100*24*60*60*1e3),o}))}createUser(e){return e.roles=[2],e.authToken="auth-token-"+Math.random(),e.refreshToken="auth-token-"+Math.random(),e.expiresIn=new Date(Date.now()+100*24*60*60*1e3),e.pic="./assets/media/avatars/300-1.jpg",this.http.post(le,e)}forgotPassword(e){return this.getAllUsers().pipe(f(t=>t.find(a=>a.email.toLowerCase()===e.toLowerCase())!==void 0))}getUserByToken(e){let t=O.users.find(s=>s.authToken===e);return t?u(t):u(void 0)}getAllUsers(){return this.http.get(le)}static \u0275fac=function(t){return new(t||n)(h(ne))};static \u0275prov=g({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Ye=(()=>{class n{authHttpService;router;unsubscribe=[];authLocalStorageToken=`${A.appVersion}-${A.USERDATA_KEY}`;currentUser$;isLoading$;currentUserSubject;isLoadingSubject;get currentUserValue(){return this.currentUserSubject.value}set currentUserValue(e){this.currentUserSubject.next(e)}constructor(e,t){this.authHttpService=e,this.router=t,this.isLoadingSubject=new x(!1),this.currentUserSubject=new x(void 0),this.currentUser$=this.currentUserSubject.asObservable(),this.isLoading$=this.isLoadingSubject.asObservable();let s=this.getUserByToken().subscribe();this.unsubscribe.push(s)}login(e,t){return this.isLoadingSubject.next(!0),this.authHttpService.login(e,t).pipe(f(s=>this.setAuthFromLocalStorage(s)),b(()=>this.getUserByToken()),K(s=>(console.error("err",s),u(void 0))),S(()=>this.isLoadingSubject.next(!1)))}logout(){localStorage.removeItem(this.authLocalStorageToken),this.router.navigate(["/auth/login"],{queryParams:{}})}getUserByToken(){let e=this.getAuthFromLocalStorage();return!e||!e.authToken?u(void 0):(this.isLoadingSubject.next(!0),this.authHttpService.getUserByToken(e.authToken).pipe(f(t=>(t?this.currentUserSubject.next(t):this.logout(),t)),S(()=>this.isLoadingSubject.next(!1))))}registration(e){return this.isLoadingSubject.next(!0),this.authHttpService.createUser(e).pipe(f(()=>{this.isLoadingSubject.next(!1)}),b(()=>this.login(e.email,e.password)),K(t=>(console.error("err",t),u(void 0))),S(()=>this.isLoadingSubject.next(!1)))}forgotPassword(e){return this.isLoadingSubject.next(!0),this.authHttpService.forgotPassword(e).pipe(S(()=>this.isLoadingSubject.next(!1)))}setAuthFromLocalStorage(e){return e&&e.authToken?(localStorage.setItem(this.authLocalStorageToken,JSON.stringify(e)),!0):!1}getAuthFromLocalStorage(){try{let e=localStorage.getItem(this.authLocalStorageToken);return e?JSON.parse(e):void 0}catch(e){console.error(e);return}}ngOnDestroy(){this.unsubscribe.forEach(e=>e.unsubscribe())}static \u0275fac=function(t){return new(t||n)(h(Z),h(se))};static \u0275prov=g({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();export{$ as a,Se as b,J as c,A as d,I as e,O as f,Ye as g,Me as h};
